# RxID Data Schema

## Tables

- [users](#usersTABLE)
- [meds](#medsTABLE)
- [diaries](#diariesTABLE)
- [rems](#remsTABLE)

## users <a name="usersTABLE"></a>

| Field          | Data Type | Notes                                            |
| -------------- | --------- | ------------------------------------------------ |
| id             | integer   | required, PK, auto-increment                     |
| username       | string    | required, unique, 64 chars                       |
| password       | string    | required, 64 chars                               |
| created_at     | date      | required, auto-generated                         |
| premium        | boolean   | required, default false (access to full app)     |
| email          | string    | optional, 64 chars                               |
| phone          | string    | optional, 32 chars (used for all reminders)      |
| first_name     | string    | optional, 64 chars                               |
| last_name      | string    | optional, 64 chars                               |
| auth_id        | string    | required?, 128 chars, unique, generated by Auth0 |
| sort_diary_med | string    | required, default 'alpha'                        |

## meds <a name="medsTABLE"></a>

| Field                | Data Type | Notes                                                                                         |
| -------------------- | --------- | --------------------------------------------------------------------------------------------- |
| id                   | integer   | required, PK, auto-increment                                                                  |
| user_id              | integer   | required, FK of users PK, onDelete: cascade, onUpdate: cascade                                |
| med_name             | string    | required, 64 chars, source: user-entered or DS backend                                        |
| med_active           | boolean   | required, default true (med currently taken)                                                  |
| med_add_date         | string    | required                                                                                      |
| med_rx               | string    | optional, 64 chars (med Rx#)                                                                  |
| med_pharm_phone      | string    | optional, 32 chars                                                                            |
| med_type             | string    | optional, 64 chars (tablet, cream, etc.)                                                      |
| med_admin_mode       | string    | optional, 32 chars (oral, topical, etc.)                                                      |
| med_color            | string    | optional, 32 chars                                                                            |
| med_shape            | string    | optional, 32 chars                                                                            |
| med_strength         | integer   | optional, 16 chars (strength of each pill)                                                    |
| med_strength_unit    | string    | optional, 32 chars (mg, etc.)                                                                 |
| med_dose             | integer   | optional, 16 chars (prescribed dose per admin)                                                |
| med_dose_unit        | string    | optional, 32 chars (mg, tablet, etc.)                                                         |
| med_dose_freq        | integer   | optional, 16 chars (# times per \_\_\_)                                                       |
| med_dose_freq_unit   | string    | optional, 32 chars (day, week, etc.)                                                          |
| med_directions       | array     | optional, array of strings (take with food, etc.) (NOTE: stringify before storing)            |
| med_admin_start_date | date      | optional (RESEARCH NEEDED)                                                                    |
| med_admin_end_date   | date      | optional (RESEARCH NEEDED)                                                                    |
| med_admin_times      | array     | optional, array of times (times of admin) (NOTE: stringify before storing) (RESEARCH NEEDED)  |
| med_diary_active     | boolean   | optional, default false (user flag for diaries)                                               |
| med_diary_start_date | date      | optional (RESEARCH NEEDED)                                                                    |
| med_diary_end_date   | date      | optional (RESEARCH NEEDED)                                                                    |
| med_diary_times      | array     | optional, array of times (diary reminders) (NOTE: stringify before storing) (RESEARCH NEEDED) |
| med_ingredients      | string    | optional, comma-delimited, source: DS backend (RESEARCH NEEDED)                               |
| med_side_effects     | string    | optional, comma-delimited, source: DS backend (RESEARCH NEEDED)                               |
| med_notes            | string    | optional, 1024 chars (general user notes)                                                     |

## diaries <a name="diariesTABLE"></a>

| Field       | Data Type | Notes                                                          |
| ----------- | --------- | -------------------------------------------------------------- |
| id          | integer   | required, PK, auto-increment                                   |
| user_id     | integer   | required, FK of users PK, onDelete: cascade, onUpdate: cascade |
| med_id      | integer   | required, FK of meds PK, onDelete: cascade, onUpdate: cascade  |
| diary_date  | string    | required, epoch time, auto-generated                           |
| diary_emoji | string    | optional/required: 1/2 (code for emoji)                        |
| diary_text  | string    | optional/required: 2/2, 1024 chars                             |

## rems <a name="remsTABLE"></a>

| Field     | Data Type | Notes                                                          |
| --------- | --------- | -------------------------------------------------------------- |
| id        | integer   | required, PK, auto-increment                                   |
| user_id   | integer   | required, FK of users PK, onDelete: cascade, onUpdate: cascade |
| med_id    | integer   | required, FK of meds PK, onDelete: cascade, onUpdate: cascade  |
| rem_type  | string    | required, default 'admin' ('admin' or 'diary' or 'refill')     |
| rem_date  | date      | required, UTC date code                                        |
| rem_notes | string    | optional, 16 chars (user notes to appear in reminder)          |
